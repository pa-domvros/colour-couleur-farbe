
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Guess the Colour</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Balsamiq Sans', cursive;
    }
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #f00;
      opacity: 0;
      animation: fall 3s ease-in forwards;
    }
    @keyframes fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    .option-btn {
      background-color: #ffffff !important;
      color: #4f46e5 !important;
      font-weight: 700 !important;
      border: 2px solid #c7d2fe !important;
    }
    .option-btn:hover {
      background-color: #eef2ff !important;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center min-h-screen p-4">
  <div class="bg-teal-100 p-8 md:p-12 rounded-3xl shadow-2xl w-full max-w-lg text-center">
    <div class="mb-4 flex justify-between items-center">
      <select id="language-select" class="bg-gray-100 rounded-lg p-2 text-gray-700 font-semibold">
        <option value="en-GB">English</option>
        <option value="de-DE">Deutsch</option>
        <option value="fr-FR">Français</option>
      </select>
    </div>
    <h1 id="main-title" class="text-3xl md:text-4xl font-bold text-gray-800 mb-6"></h1>
    <div id="color-box" class="w-36 h-36 md:w-48 md:h-48 mx-auto rounded-xl shadow-inner border-4 border-gray-200 mb-8 flex items-center justify-center overflow-hidden"></div>
    <div id="options-container" class="grid grid-cols-2 gap-4 mt-6"></div>
    <div id="message-box" class="mt-8 text-xl font-semibold text-gray-700 h-8"></div>
    <button id="play-again-btn" onclick="resetGame()" class="hidden mt-6 bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"></button>
    <div class="mt-8 text-sm text-gray-600">
      <p>✨✍️ Devised by Panagiotis Domvros, English and Drama Teacher © 2025✍️✨</p>
    </div>
  </div>

<script>
const colors = [
  { image: "red.jpg", name: { en: "Red", de: "Rot", fr: "Rouge" } },
  { image: "blue.jpg", name: { en: "Blue", de: "Blau", fr: "Bleu" } },
  { image: "green.jpg", name: { en: "Green", de: "Grün", fr: "Vert" } },
  { image: "yellow.jpg", name: { en: "Yellow", de: "Gelb", fr: "Jaune" } },
  { image: "orange.jpg", name: { en: "Orange", de: "Orange", fr: "Orange" } },
  { image: "purple.jpg", name: { en: "Purple", de: "Lila", fr: "Violet" } },
  { image: "pink.jpg", name: { en: "Pink", de: "Rosa", fr: "Rose" } },
  { image: "brown.jpg", name: { en: "Brown", de: "Braun", fr: "Marron" } },
  { image: "black.jpg", name: { en: "Black", de: "Schwarz", fr: "Noir" } },
  { image: "white.jpg", name: { en: "White", de: "Weiß", fr: "Blanc" } },
  { image: "grey.jpg", name: { en: "Grey", de: "Grau", fr: "Gris" } },
];

const translations = {
  'en-GB': { title: "Guess the Colour!", correct: "Correct!", incorrect: "Incorrect!", congrats: "Congrats! You got them all!", playAgain: "Play Again" },
  'de-DE': { title: "Rate die Farbe!", correct: "Richtig!", incorrect: "Falsch!", congrats: "Glückwunsch! Du hast alle richtig!", playAgain: "Nochmal spielen" },
  'fr-FR': { title: "Devinez la couleur!", correct: "Correct!", incorrect: "Faux!", congrats: "Félicitations ! Vous les avez toutes trouvées !", playAgain: "Rejouer" }
};

let correctColor = {};
let allOptions = [];
let remainingColors = [];
let currentLang = 'en-GB';

function mapLangCode(code) {
  if (code.startsWith('en')) return 'en';
  if (code.startsWith('fr')) return 'fr';
  if (code.startsWith('de')) return 'de';
  return 'en';
}

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function playSound(isCorrect) {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.type = isCorrect ? 'sine' : 'square';
  osc.frequency.value = isCorrect ? 800 : 200;
  osc.connect(gain);
  gain.connect(ctx.destination);
  gain.gain.setValueAtTime(0.5, ctx.currentTime);
  osc.start();
  gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.4);
  osc.stop(ctx.currentTime + 0.4);
}

function resetGame() {
  document.querySelectorAll('.confetti').forEach(el => el.remove());
  remainingColors = [...colors];
  shuffleArray(remainingColors);
  document.getElementById('play-again-btn').classList.add('hidden');
  startNewRound();
}

function startNewRound() {
  const colorBox = document.getElementById('color-box');
  const optionsContainer = document.getElementById('options-container');
  const messageBox = document.getElementById('message-box');
  const mainTitle = document.getElementById('main-title');

  if (remainingColors.length === 0) return endGame();

  mainTitle.textContent = translations[currentLang].title;
  messageBox.textContent = '';
  correctColor = remainingColors.pop();

  colorBox.innerHTML = '';
  const image = document.createElement('img');
  image.src = correctColor.image;
  image.alt = correctColor.name[mapLangCode(currentLang)];
  image.className = "w-full h-full object-cover rounded-xl";
  colorBox.appendChild(image);

  const incorrectOptions = [...colors.filter(c => c !== correctColor)];
  shuffleArray(incorrectOptions);
  const displayedOptions = [correctColor, ...incorrectOptions.slice(0, 3)];
  shuffleArray(displayedOptions);

  optionsContainer.innerHTML = '';
  displayedOptions.forEach(option => {
    const btn = document.createElement('button');
    btn.textContent = option.name[mapLangCode(currentLang)];
    btn.className = "option-btn py-3 px-4 rounded-full shadow-lg transition-transform hover:scale-105";
    btn.onclick = () => checkAnswer(option.name[mapLangCode(currentLang)]);
    optionsContainer.appendChild(btn);
  });
}

function checkAnswer(selected) {
  const options = document.getElementById('options-container').children;
  const messageBox = document.getElementById('message-box');
  const correctName = correctColor.name[mapLangCode(currentLang)];

  Array.from(options).forEach(btn => {
    btn.disabled = true;
    if (btn.textContent === correctName) {
      btn.classList.remove('option-btn');
      btn.classList.add('bg-green-500', 'text-white');
    } else if (btn.textContent === selected) {
      btn.classList.remove('option-btn');
      btn.classList.add('bg-red-500', 'text-white');
    }
  });

  const isCorrect = selected === correctName;
  messageBox.textContent = isCorrect ? translations[currentLang].correct : translations[currentLang].incorrect;
  messageBox.classList.remove('text-red-600', 'text-green-600');
  messageBox.classList.add(isCorrect ? 'text-green-600' : 'text-red-600');
  playSound(isCorrect);

  setTimeout(startNewRound, 1500);
}

function endGame() {
  document.getElementById('color-box').innerHTML = '';
  document.getElementById('options-container').innerHTML = '';
  document.getElementById('message-box').textContent = translations[currentLang].congrats;
  document.getElementById('play-again-btn').textContent = translations[currentLang].playAgain;
  document.getElementById('play-again-btn').classList.remove('hidden');
  for (let i = 0; i < 100; i++) {
    const c = document.createElement('div');
    c.className = 'confetti';
    c.style.left = `${Math.random() * 100}vw`;
    c.style.backgroundColor = ['#f00','#0f0','#00f','#ff0','#0ff','#f0f'][Math.floor(Math.random()*6)];
    c.style.animationDelay = `${Math.random() * 2}s`;
    document.body.appendChild(c);
  }
}

document.getElementById('language-select').addEventListener('change', (e) => {
  currentLang = e.target.value;
  resetGame();
});

document.addEventListener('DOMContentLoaded', () => {
  currentLang = document.getElementById('language-select').value;
  resetGame();
});
</script>
</body>
</html>
